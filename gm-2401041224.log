Start installing ROSA HCP cluster gm-2401041224 in a Multi-AZ ...
{
    "UserId": "AIDAQGXXSRGTIQLIJDFNF",
    "Account": "014477855142",
    "Arn": "arn:aws:iam::014477855142:user/open-environment-dnczr-admin"
}
{
    "Role": {
        "Path": "/aws-service-role/elasticloadbalancing.amazonaws.com/",
        "RoleName": "AWSServiceRoleForElasticLoadBalancing",
        "RoleId": "AROAQGXXSRGTLBZXGXLWH",
        "Arn": "arn:aws:iam::014477855142:role/aws-service-role/elasticloadbalancing.amazonaws.com/AWSServiceRoleForElasticLoadBalancing",
        "CreateDate": "2023-01-24T15:40:44+00:00",
        "AssumeRolePolicyDocument": {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Effect": "Allow",
                    "Principal": {
                        "Service": "elasticloadbalancing.amazonaws.com"
                    },
                    "Action": "sts:AssumeRole"
                }
            ]
        },
        "Description": "Allows ELB to call AWS services on your behalf.",
        "MaxSessionDuration": 3600,
        "RoleLastUsed": {
            "LastUsedDate": "2024-01-03T19:22:21+00:00",
            "Region": "us-east-2"
        }
    }
}
#
#
Creating the VPC  vpc-0eda42599a6b33573
VPC_ID_VALUE  vpc-0eda42599a6b33573
Creating the Public Subnet 2a:  subnet-00ea0948f8c0b90cd
Creating the Public Subnet 2b:  subnet-099b34a8fd98829bd
Creating the Public Subnet 2c:  subnet-0e261dc060186e9d9
Creating the Private Subnet 2a:  subnet-00f77007b3e786f34
Creating the Private Subnet 2b:  subnet-0906abd1a1ca0bdca
Creating the Private Subnet 2c:  subnet-0bddf6aedb0d2d893
Creating the IGW:  igw-0565691ec45168aa7
Creating the Public Route Table:  rtb-0074322b74f1a3a69
{
    "Return": true
}
{
    "AssociationId": "rtbassoc-01d190b27eafe231a",
    "AssociationState": {
        "State": "associated"
    }
}
{
    "AssociationId": "rtbassoc-02ec4eaa33b2a7abb",
    "AssociationState": {
        "State": "associated"
    }
}
{
    "AssociationId": "rtbassoc-097968b8aaae091c7",
    "AssociationState": {
        "State": "associated"
    }
}
EIP_ADDRESS  eipalloc-06c3e5fd1c6e83bf4
Creating the NGW:  nat-0c91ede27805017f9
Waiting for NGW to warm up 
Creating the Private Route Table:  rtb-00c02043f49e26a6c
{
    "Return": true
}
{
    "AssociationId": "rtbassoc-0b2df5a92bfcf58f6",
    "AssociationState": {
        "State": "associated"
    }
}
Creating the Private Route Table:  rtb-0eeba887c347467d0
{
    "Return": true
}
{
    "AssociationId": "rtbassoc-0bcd527b20972cc72",
    "AssociationState": {
        "State": "associated"
    }
}
Creating the Private Route Table:  rtb-0bdb4aad84f5613de
{
    "AssociationId": "rtbassoc-044484e4a8e702b84",
    "AssociationState": {
        "State": "associated"
    }
}
#
VPC creation ... done! 
#
#
Going to create account and operator roles ...
INFO: Creating hosted CP account roles using 'arn:aws:iam::014477855142:user/open-environment-dnczr-admin'
INFO: Created role 'TestManagedHCP-HCP-ROSA-Installer-Role' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Installer-Role'
INFO: Created role 'TestManagedHCP-HCP-ROSA-Support-Role' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Support-Role'
INFO: Created role 'TestManagedHCP-HCP-ROSA-Worker-Role' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Worker-Role'
Creating the OIDC config 28i4gij0bcvgdgs1eusrqljgkvpamqco
OIDC_ID  28i4gij0bcvgdgs1eusrqljgkvpamqco
Creating operator-roles
INFO: Creating roles using 'arn:aws:iam::014477855142:user/open-environment-dnczr-admin'
INFO: Created role 'TestManagedHCP-openshift-cluster-csi-drivers-ebs-cloud-credentia' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-openshift-cluster-csi-drivers-ebs-cloud-credentia'
INFO: Created role 'TestManagedHCP-openshift-cloud-network-config-controller-cloud-c' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-openshift-cloud-network-config-controller-cloud-c'
INFO: Created role 'TestManagedHCP-kube-system-kube-controller-manager' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-kube-controller-manager'
INFO: Created role 'TestManagedHCP-kube-system-capa-controller-manager' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-capa-controller-manager'
INFO: Created role 'TestManagedHCP-kube-system-control-plane-operator' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-control-plane-operator'
INFO: Created role 'TestManagedHCP-kube-system-kms-provider' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-kms-provider'
INFO: Created role 'TestManagedHCP-openshift-image-registry-installer-cloud-credenti' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-openshift-image-registry-installer-cloud-credenti'
INFO: Created role 'TestManagedHCP-openshift-ingress-operator-cloud-credentials' with ARN 'arn:aws:iam::014477855142:role/TestManagedHCP-openshift-ingress-operator-cloud-credentials'
Creating ROSA HCP cluster 

INFO: Creating cluster 'gm-2401041224'
INFO: To view a list of clusters and their status, run 'rosa list clusters'
INFO: Cluster 'gm-2401041224' has been created.
INFO: Once the cluster is installed you will need to add an Identity Provider before you can login into the cluster. See 'rosa create idp --help' for more information.

Name:                       gm-2401041224
ID:                         28i4goo2f2rvtg4851t5ocir629csiib
External ID:                fbdf99f3-bf9d-4d22-b7e2-3e32ef575f8b
Control Plane:              ROSA Service Hosted
OpenShift Version:          4.14.6
Channel Group:              stable
DNS:                        Not ready
AWS Account:                014477855142
AWS Billing Account:        014477855142
API URL:                    
Console URL:                
Region:                     us-east-2
Availability:
 - Control Plane:           MultiAZ
 - Data Plane:              SingleAZ
Nodes:
 - Compute (desired):       3
 - Compute (current):       0
Network:
 - Type:                    OVNKubernetes
 - Service CIDR:            172.30.0.0/16
 - Machine CIDR:            10.0.0.0/16
 - Pod CIDR:                10.128.0.0/14
 - Host Prefix:             /23
Workload Monitoring:        Enabled
Ec2 Metadata Http Tokens:   optional
STS Role ARN:               arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Installer-Role
Support Role ARN:           arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Support-Role
Instance IAM Roles:
 - Worker:                  arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Worker-Role
Operator IAM Roles:
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-kms-provider
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-kube-controller-manager
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-cluster-csi-drivers-ebs-cloud-credentia
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-cloud-network-config-controller-cloud-c
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-image-registry-installer-cloud-credenti
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-ingress-operator-cloud-credentials
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-capa-controller-manager
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-control-plane-operator
Managed Policies:           Yes
State:                      waiting (Waiting for user action)
Private:                    No
Created:                    Jan  4 2024 11:28:40 UTC
Details Page:               https://console.redhat.com/openshift/details/s/2aUKSiBrUAaREZP093e3aTOsmHt
OIDC Endpoint URL:          https://oidc.op1.openshiftapps.com/28i4gij0bcvgdgs1eusrqljgkvpamqco (Managed)
Audit Log Forwarding:       disabled

INFO: Preparing to create operator roles.
INFO: Cluster 'gm-2401041224' is using reusable OIDC Config and operator roles already exist.
INFO: Preparing to create OIDC Provider.
INFO: Creating OIDC provider using 'arn:aws:iam::014477855142:user/open-environment-dnczr-admin'
INFO: Created OIDC provider with ARN 'arn:aws:iam::014477855142:oidc-provider/oidc.op1.openshiftapps.com/28i4gij0bcvgdgs1eusrqljgkvpamqco'
INFO: To determine when your cluster is Ready, run 'rosa describe cluster -c gm-2401041224'.
INFO: To watch your cluster installation logs, run 'rosa logs install -c gm-2401041224 --watch'.
Appending rosa installation logs to /home/gmollo/tools/cluster/svil/fast-rosa-hcp-depoly/gm-2401041224.log 
INFO: Cluster 'gm-2401041224' is in waiting state waiting for installation to begin. Logs will show up within 5 minutes
0001-01-01 00:00:00 +0000 UTC hostedclusters gm-2401041224 Version 
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 failed to get clusterVersion: HostedControlPlane.hypershift.openshift.io "gm-2401041224" not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 failed to get clusterVersion: HostedControlPlane.hypershift.openshift.io "gm-2401041224" not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 failed to get clusterVersion: HostedControlPlane.hypershift.openshift.io "gm-2401041224" not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 failed to get clusterVersion: HostedControlPlane.hypershift.openshift.io "gm-2401041224" not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 failed to get clusterVersion: HostedControlPlane.hypershift.openshift.io "gm-2401041224" not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Waiting for hosted control plane to be healthy
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Ignition server deployment not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Configuration passes validation
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 HostedCluster is supported by operator configuration
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Release image is valid
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 ValidAWSIdentityProvider StatusUnknown
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Reconciliation active on resource
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 failed to get referenced secret ocm-production-28i4goo2f2rvtg4851t5ocir629csiib/cluster-api-cert: Secret "cluster-api-cert" not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 HostedCluster is at expected version
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Condition not found in the CVO.
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Ignition server deployment not found
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Configuration passes validation
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 HostedCluster is supported by operator configuration
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Condition not found in the CVO.
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Release image is valid
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 ValidAWSIdentityProvider StatusUnknown
2024-01-04 11:31:52 +0000 UTC hostedclusters gm-2401041224 Reconciliation active on resource
2024-01-04 11:33:43 +0000 UTC hostedclusters gm-2401041224 Reconciliation completed successfully
2024-01-04 11:33:43 +0000 UTC hostedclusters gm-2401041224 OIDC configuration is valid
2024-01-04 11:33:43 +0000 UTC hostedclusters gm-2401041224 Reconciliation completed successfully
2024-01-04 11:33:48 +0000 UTC hostedclusters gm-2401041224 WebIdentityErr
2024-01-04 11:33:49 +0000 UTC hostedclusters gm-2401041224 All is well
2024-01-04 11:33:49 +0000 UTC hostedclusters gm-2401041224 lookup api.gm-2401041224.2pv6.p3.openshiftapps.com on 172.30.0.10:53: no such host
2024-01-04 11:33:49 +0000 UTC hostedclusters gm-2401041224 [capi-provider deployment has 1 unavailable replicas, kube-apiserver deployment has 2 unavailable replicas]
2024-01-04 11:33:49 +0000 UTC hostedclusters gm-2401041224 Configuration passes validation
2024-01-04 11:33:49 +0000 UTC hostedclusters gm-2401041224 AWS KMS is not configured
2024-01-04 11:33:49 +0000 UTC hostedclusters gm-2401041224 Waiting for Kube APIServer deployment to become available
2024-01-04 11:33:56 +0000 UTC hostedclusters gm-2401041224 All is well
2024-01-04 11:34:45 +0000 UTC hostedclusters gm-2401041224 EtcdAvailable QuorumAvailable
2024-01-04 11:35:47 +0000 UTC hostedclusters gm-2401041224 Kube APIServer deployment is available
2024-01-04 11:35:54 +0000 UTC hostedclusters gm-2401041224 All is well
2024-01-04 11:36:52 +0000 UTC hostedclusters gm-2401041224 [aws-cloud-controller-manager deployment has 1 unavailable replicas, catalog-operator deployment has 1 unavailable replicas, certified-operators-catalog deployment has 2 unavailable replicas, cluster-autoscaler deployment has 1 unavailable replicas, cluster-image-registry-operator deployment has 1 unavailable replicas, cluster-network-operator deployment has 1 unavailable replicas, cluster-storage-operator deployment has 1 unavailable replicas, cluster-version-operator deployment has 1 unavailable replicas, community-operators-catalog deployment has 2 unavailable replicas, csi-snapshot-controller-operator deployment has 1 unavailable replicas, dns-operator deployment has 1 unavailable replicas, hosted-cluster-config-operator deployment has 1 unavailable replicas, ingress-operator deployment has 1 unavailable replicas, machine-approver deployment has 1 unavailable replicas, oauth-openshift deployment has 2 unavailable replicas, olm-operator deployment has 1 unavailable replicas, openshift-oauth-apiserver deployment has 2 unavailable replicas, packageserver deployment has 3 unavailable replicas, redhat-marketplace-catalog deployment has 2 unavailable replicas, redhat-operators-catalog deployment has 2 unavailable replicas, router deployment has 1 unavailable replicas]
2024-01-04 11:36:52 +0000 UTC hostedclusters gm-2401041224 All is well
2024-01-04 11:37:06 +0000 UTC hostedclusters gm-2401041224 ClusterVersionSucceeding FromClusterVersion
2024-01-04 11:37:06 +0000 UTC hostedclusters gm-2401041224 Working towards 4.14.6: 372 of 602 done (61% complete)
2024-01-04 11:37:06 +0000 UTC hostedclusters gm-2401041224 Payload loaded version="4.14.6" image="quay.io/openshift-release-dev/ocp-release@sha256:e5128c3b0ab225e0abf9344dae504e08b82dda4885bbd047e2dbc13cc3d9879b" architecture="amd64"
2024-01-04 11:37:06 +0000 UTC hostedclusters gm-2401041224 ClusterVersionAvailable FromClusterVersion
2024-01-04 11:37:10 +0000 UTC hostedclusters gm-2401041224 The hosted control plane is available
INFO: Cluster 'gm-2401041224' is now ready

Name:                       gm-2401041224
ID:                         28i4goo2f2rvtg4851t5ocir629csiib
External ID:                fbdf99f3-bf9d-4d22-b7e2-3e32ef575f8b
Control Plane:              ROSA Service Hosted
OpenShift Version:          4.14.6
Channel Group:              stable
DNS:                        gm-2401041224.2pv6.p3.openshiftapps.com
AWS Account:                014477855142
AWS Billing Account:        014477855142
API URL:                    https://api.gm-2401041224.2pv6.p3.openshiftapps.com:443
Console URL:                
Region:                     us-east-2
Availability:
 - Control Plane:           MultiAZ
 - Data Plane:              SingleAZ
Nodes:
 - Compute (desired):       3
 - Compute (current):       0
Network:
 - Type:                    OVNKubernetes
 - Service CIDR:            172.30.0.0/16
 - Machine CIDR:            10.0.0.0/16
 - Pod CIDR:                10.128.0.0/14
 - Host Prefix:             /23
Workload Monitoring:        Enabled
Ec2 Metadata Http Tokens:   optional
STS Role ARN:               arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Installer-Role
Support Role ARN:           arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Support-Role
Instance IAM Roles:
 - Worker:                  arn:aws:iam::014477855142:role/TestManagedHCP-HCP-ROSA-Worker-Role
Operator IAM Roles:
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-kms-provider
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-kube-controller-manager
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-cluster-csi-drivers-ebs-cloud-credentia
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-cloud-network-config-controller-cloud-c
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-image-registry-installer-cloud-credenti
 - arn:aws:iam::014477855142:role/TestManagedHCP-openshift-ingress-operator-cloud-credentials
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-capa-controller-manager
 - arn:aws:iam::014477855142:role/TestManagedHCP-kube-system-control-plane-operator
Managed Policies:           Yes
State:                      ready 
Private:                    No
Created:                    Jan  4 2024 11:28:40 UTC
Details Page:               https://console.redhat.com/openshift/details/s/2aUKSiBrUAaREZP093e3aTOsmHt
OIDC Endpoint URL:          https://oidc.op1.openshiftapps.com/28i4gij0bcvgdgs1eusrqljgkvpamqco (Managed)
Audit Log Forwarding:       disabled

Creating the cluster-admin user
INFO: Admin account has been added to cluster 'gm-2401041224'.
INFO: Please securely store this generated password. If you lose this password you can delete and recreate the cluster admin user.
INFO: To login, run the following command:

   oc login https://api.gm-2401041224.2pv6.p3.openshiftapps.com:443 --username cluster-admin --password IfBgr-MfGdy-4w4Bn-NZ6wj

INFO: It may take several minutes for this access to become active.
#
Done!!! 
Cluster  gm-2401041224  has been installed and is up and running
Please allow a few minutes before to login, for additional information check the /home/gmollo/tools/cluster/svil/fast-rosa-hcp-depoly/gm-2401041224.log file
 
 
 
